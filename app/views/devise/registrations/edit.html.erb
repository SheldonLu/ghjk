<div class="content">
  <div class="box">
    <%= simple_form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put, :enctype =>  "multipart/form-data" }) do |f| %>
        <%= render "shared/error_messages", :target => resource if params[:by].blank? %>
        <fieldset>
          <legend><%= t("users.personal_information")%></legend>
          <%= f.input :avatar %>
          <%= f.input :email, :input_html => { :class => "span3", :disabled => (!resource.email.blank?) } %>

          <%= f.input :location, :input_html => { :class => "span3" } %>

          <%= f.input :tagline, :input_html => { :class => "xxlarge" } %>
          <div class="form-actions">
            <%= f.submit "更新资料", :class => "btn btn-primary", 'data-disable-with' => t("common.saving") %>
          </div>
        </fieldset>
    <% end %>
  </div>
  <div class="box">
    <%= simple_form_for(resource, :as => resource_name, :url => registration_path(resource_name,:by => :pwd), :html => { :method => :put }) do |f| %>
        <%= render "shared/error_messages", :target => resource if params[:by] == "pwd" %>
        <fieldset>
          <legend><%= t("users.edit_password")%></legend>
          <input type="hidden" name="user[:by]" value="pwd" />
          <%= f.input :current_password %>
          <%= f.input :password %>
          <%= f.input :password_confirmation %>
          <div class="form-actions">
            <%= f.submit "修改密码", :class => "btn btn-success", 'data-disable-with' => t("common.saving") %>
          </div>
        </fieldset>
    <% end %>
  </div>
</div>

<div class="sidebar">
  <div class="box" style="text-align:center;">
    <%= user_avatar_tag(@user, :big, :link => false) %> <br />
    <!--%= t("users.edit_on_gravatar") %-->
    <!--<a href="http://www.gravatar.com">gravatar.com</a>-->
  </div>

</div>

